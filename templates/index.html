
<!DOCTYPE html>
<html>
<head><title>Glass Quality Check</title></head>
<body>
  <h2>📁 上传玻璃数据 CSV（包含 OK_NG）</h2>
  <form method="POST" enctype="multipart/form-data">
    <input type="file" name="csv_file" accept=".csv">
    <input type="submit" value="上传并训练模型">
  </form>
  <br>
  <h3>{{ message }}</h3>
  {% if features %}
    <h2>🔍 输入参数预测</h2>
    <form method="POST">
      {% for f in features %}
        <label>{{ f }}:</label>
        <input type="number" step="any" name="{{ f }}"><br>
      {% endfor %}
      <input type="submit" value="预测合格与否">
    </form>
  {% endif %}
  {% if result %}
    <h3>结果: {{ result }}（概率 {{ '%.2f' % prob }}）</h3>
    <img src="/static/shap_plot.png" width="600">
  {% endif %}
</body>
</html>
